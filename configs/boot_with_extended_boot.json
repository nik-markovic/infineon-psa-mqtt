{
    "schema-version": 1.0,
    "content":
    [
        {
            "name": "metadata_proj_cm33_s",
            "description": "add MCUboot metadata to the hex",
            "enabled" : true,
            "commands" :
            [
                {
                    "command" : "sign",
                    "inputs" :
                    [
                        {
                            "file" : "../build/project_hex/proj_cm33_s.hex",
                            "header-size": "0x400",
                            "fill-value" : "0xff",
                            "slot-size" : "0x240000",
                            "hex-address" : "{{CYMEM_CM33_0_S_m33s_nvm_S_START}}"
                        }
                    ],
                    "outputs":
                    [
                        {
                            "file" : "../build/project_hex/proj_cm33_s_signed.hex",
                            "format": "ihex"
                        }
                    ],
                    "extra_config":
                    [
                        {
                            "project": "proj_cm33_s",
                            "debug_config_name" : "proj_cm33_s",
                            "default":false,
                            "build_dependency" : "project"
                        }
                    ]
                }
            ]
        },
        {
            "name": "relocate_proj_cm33_ns",
            "description": "relocate the hex to a programmable (S-BUS) address",
            "enabled" : true,
            "commands" :
            [
                {
                    "command" : "hex-relocate",
                    "inputs" :
                    [
                        {
                            "file" : "../build/project_hex/proj_cm33_ns.hex",
                            "regions" : "{{RelocationTable}}"
                        }
                    ],
                    "outputs":
                    [
                        {
                            "file" : "../build/project_hex/proj_cm33_ns_shifted.hex"
                        }
                    ],
                    "extra_config":
                    [
                        {
                            "project": "proj_cm33_ns",
                            "debug_config_name" : "proj_cm33_ns",
                            "default":false,
                            "build_dependency" : "project"
                        }
                    ]
                }
            ]
        },
        {
            "name": "merge",
            "description": "combine individual project hex files into a single hex",
            "enabled": true,
            "commands" :
            [
                {
                    "command" : "merge",
                    "inputs" :
                    [
                        {
                            "file" : "../build/project_hex/proj_cm33_s_signed.hex"
                        },
                        {
                            "file" : "../build/project_hex/proj_cm33_ns_shifted.hex"
                        },
                        {
                            "file" : "../build/project_hex/proj_cm55.hex"
                        }
                    ],
                    "outputs" :
                    [
                        {
                            "file" : "../build/app_combined.hex",
                            "format" : "ihex",
                            "overlap" : "ignore"
                        }
                    ]
                }
            ]
        }
    ]
}
